(function($){var methods={init:function(options){return options||(options={}),def={content:{},result:{key:""}},$.extend(!0,def,options),this.each(function(){$(this).data("sn",def),$(this).snTriggers(),$(this).snEvents({href:"#autoload"})})}};$.fn.sn=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}})(jQuery),function($){var methods={init:function(){return this.each(function(){})},sendRequest:function(options){options||(options={});var def={type:"json",debug:!1,action:"submit",login:$("#inputLogin").val(),password:$("#inputPassword").val(),page:$("#page").val(),id:"",message:""};$.extend(!0,def,options),def.debug&&(def.type="text");var sn=$(this).data("sn");$.ajax({url:"index.php",type:"POST",data:{action:def.action,page:def.page,login:def.login,password:def.password,id:def.id,message:def.message,key:sn.result.key},dataType:def.type,timeout:1e4,beforeSend:function(){$("#loading").show()},success:function(s){"object"==typeof s?$.extend(!0,sn.result,s):(def.debug&&alert(s),sn.result=s),$(this).data("sn",sn),"object"==typeof sn.result&&(sn.result.alert&&alert(sn.result.alert),sn.result.callback&&$(this).snEvents({href:"#"+sn.result.callback})),$("#loading").hide()},error:function(){}})}};$.fn.snAjax=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}}(jQuery),function($){var methods={init:function(){return this.each(function(){$(this).snConf("main")})},main:function(){var sn=$(this).data("sn");$.ajax({url:"sn-project/settings/main.json",async:!1,dataType:"json",success:function(s){$.extend(!0,sn,s),$(this).data("sn",sn)}})}};$.fn.snConf=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}}(jQuery),function($){var methods={init:function(options){return this.each(function(){var def={href:"none"};$.extend(!0,def,options),$(this);var sn=$(this).data("sn"),href=def.href;switch(href.replace(/(.*)#(.*)/,"$2")){case"autoload":break;case"signin":$("#signin-error").hide(),$(this).snAjax("sendRequest",{action:"signin",debug:!1});break;case"afterSignin":sn.result&&(sn.result.response?(sn.result.claims&&($("#claims").html(sn.result.claims),$(this).snTriggers("table")),sn.result.pagination&&($("#pagination").html(sn.result.pagination),$(this).snTriggers("pagination")),$("#signin").empty()):($("#inputLogin").val(""),$("#inputPassword").val(""),$("#signin-error").show()));break;case"submit":$(this).snAjax("sendRequest",{action:"submit",debug:!1});break;case"afterSubmit":sn.result&&sn.result.table&&($("#table").html(sn.result.table),$(this).snTriggers("sort"),$(this).snTriggers("detail"),$(this).snPlayer("onClickPlay"));break;case"close":$(this).hide()}})}};$.fn.snEvents=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}}(jQuery),function($){var methods={init:function(){""!==$("#claims").html()&&$(this).snTriggers("table"),""!==$("#pagination").html()&&$(this).snTriggers("pagination"),""!==$("#signin").html()&&$(this).snTriggers("signin")},signin:function(){th=$(this),$("#fSignin").on("submit",function(e){e.preventDefault(),th.snEvents({href:"#signin"})})},table:function(){th=$(this),$(".status").on("keyup",function(){th.snAjax("sendRequest",{action:"edit",id:$(this).data("id"),message:$(this).val(),debug:!1})}),$(".status").on("blur",function(){th.snAjax("sendRequest",{action:"edit",id:$(this).data("id"),message:$(this).val(),debug:!1})})},pagination:function(){th=$(this),$("a#prev").on("click",function(e){e.preventDefault(),$("#page").val(1*$("#page").val()-1),th.snAjax("sendRequest",{action:"signin",debug:!1})}),$("a.list").on("click",function(e){e.preventDefault(),$("#page").val($(this).data("page")),th.snAjax("sendRequest",{action:"signin",debug:!1})}),$("a#next").on("click",function(e){e.preventDefault(),$("#page").val(1*$("#page").val()+1),th.snAjax("sendRequest",{action:"signin",debug:!1})})}};$.fn.snTriggers=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}}(jQuery);